---
layout: default
title: Country Regional Analysis
---

	
<link rel="stylesheet" type="text/css" href="http://assets.openspending.org/openspendingjs/master/lib/vendor/bubbletree/1.0/bubbletree.css" />
<link rel="stylesheet" type="text/css" href="css/cra-map.css" />


<div class="row">
  <script type="text/javascript">
  var os_path = 'http://assets.openspending.org/openspendingjs/master';
  yepnope.errorTimeout = 1000;

  yepnope({ 
  load: [
    os_path + '/lib/vendor/jquery.qtip.min.js',
    os_path + '/lib/vendor/jquery.history.js',
    os_path + '/lib/vendor/raphael-min.js',
    os_path + '/lib/vendor/vis4.js',
    os_path + '/lib/vendor/base64.js',
    os_path + '/lib/vendor/Tween.js',
    os_path + '/lib/vendor/bubbletree/2.0/bubbletree.js',
    os_path + '/lib/aggregator.js	',
    os_path + '/lib/vendor/bubbletree/2.0/bubbletree.cofog.js'
  ],
  complete: function() {

		$(function() {
			var $tooltip = $('<div class="tooltip">Tooltip</div>');
			$('.bubbletree').append($tooltip);
			$tooltip.hide();
			
			var dataLoaded = function(data) {
				window.bubbleTree = new BubbleTree({
					data: data,
					container: '#bubbletree',
					bubbleType: 'icon',
					bubbleStyles: {
							'cofog-1':  BubbleTree.Styles.Cofog1,
							'cofog-2':  BubbleTree.Styles.Cofog2,
							'cofog-3':  BubbleTree.Styles.Cofog3
					},
					clearColors: true, // remove all colors coming from OpenSpending API
					rootPath: 'icons/',
						tooltip: {
							qtip: true,
							delay: 800,
							content: function(node) {
								return [node.label, '<div class="desc">'+(node.description ? node.description : 'No description given')+'</div><div class="amount">Â£ '+node.famount+'</div>'];
							}
						}
				});
			};
			
			// call openspending api for data
			new OpenSpending.Aggregator({
				apiUrl: 'http://openspending.org/api',
				dataset: 'ukgov-finances-cra',
				rootNodeLabel: 'Total',
				drilldowns: ['cofog1', 'cofog2', 'cofog3'],
				cuts: ['year:2008'],
				breakdown: 'region',
				//localApiCache: 'aggregate.json',
				callback: dataLoaded
			});
		});
  }
  });
			
	</script>

  <div class="bubbletree-wrapper">
    <div id="bubbletree" class="bubbletree"></div>
  </div>
</div>





